---
{"dg-publish":true,"dg-enable-search":"true","dg-path":"文章/变量为什么需要类型.md","permalink":"/文章/变量为什么需要类型/","dgEnableSearch":"true","dgPassFrontmatter":true,"created":"2022-09-06T23:15:36.000+08:00","updated":"2023-11-14T13:32:30.000+08:00"}
---

#Technomous 

1. 类型系统
其实在计算机运算时，并不会关心类型。比如'C' + 25，从类型上来看，字符串无法和整数进行相加，因为这么做没有意义。但是如果抛开类型的话，其实在计算机底层运算的时候，'C' 是0x43这个数字，25是0x19这个数字，所以从底层来看它们进行相加并没有什么问题。

所以类型是我们自己约定出来的一套规则。因为我们写出来的程序需要在日常生活中能够使用。所以需要一个框架的约定来理解这个数字。比如我们一起约定一个框架叫"uint8"，这个框架的作用是状态的数字一对一到整数集合 0到255之间的数字。在这个计算框架下，计算 0x02+0x03得到了5，就是有意义的。如果计算字符串'C' 与 25的和，得到的结果就是没有意义的，因为无法通过这个约定的框架来解释。之后为了工程上的完备，我们又约定了浮点数，定点数，不同的编码（UTF-8、UTF-16），来把自动机接受的状态映射到不同的内容上。这就是类型做的事情。我们在编写程序的时候不会面向内存思考它到底在内存里是怎么表示的（况且部分语言还不是一一对应内存的，包括绝大部分脚本语言，并且部分语言禁止你直接操控内存，必须约定的类型来间接修改内存），通过类型这个抽象层来减少我们的思考，把重心放在编写逻辑上是很有必须要的，这么做就需要类型系统的介入。

如果没有了类型系统，计算机运行既不直观也不容易预测结果，很容易出现 untrapped error。

在强类型类型系统可以在编译时（静态语言）和运行时（动态语言）提前发现以减少untrapped error问题的出现，提高程序的健壮性。

2. 数据的位置和长度
针对类型设计的类型系统是从语法层面定义了一组操作，而从底层来看，类型也提供了数据的位置和长度。也就说，数据在哪就是地址，数据长度其实某方面就是取决于类型。

指针的本质就是存储别的变量的地址，那么指针的类型是干什么用的呢？是的，就是去访问指针所指向的地址的时候，指针的类型和指针的值（变量地址），提供了一条汇编指令最关键的两点：数据的长度和数据地址。
  
编译型&解释型

为什么 C/C++、Java 这类编译型语言就需要显示声明类型，而 Python 这类解释型语言就不需要呢？

所以是所有的编译型都需要申明类型？所有的解释型都不需要？

这个理解是不对的。首先，"编译"和"解释"是语言实现的特征，语言本身可以以任何一种方式实现。

可能我们大多只了解过C编译器（如GCC、Clang），却很少听过C解释器，如Ch。

但是，即使使用Ch解释器，我们仍然需要在Ch解释的C代码中申明类型。

Python 的对象模型本身在运行时自带了"类型"这个信息。在 Python 中所有变量的本质上都是一个对象的"指针"，也正因为如此，Python 中的各种变量直接才能随意赋值，因为赋值的本质其实就是改变一下变量所指向的对象。

而真正到了解释执行的时候，Python解释器就会取出这个类型字段，来判断操作是否符合语法，不符合的话就会运行时报错。